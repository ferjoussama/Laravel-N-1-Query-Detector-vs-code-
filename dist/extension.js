(()=>{"use strict";var e={265:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){console.log("Laravel N+1 Query Detector extension activated"),u=c.languages.createDiagnosticCollection("n1Queries"),e.subscriptions.push(u);let t=c.commands.registerCommand("n1-query-detector.detectN1Queries",(()=>{console.log("Detect N+1 Queries command triggered"),c.window.showInformationMessage("Detecting Laravel N+1 Queries..."),c.window.activeTextEditor&&l(c.window.activeTextEditor.document)}));e.subscriptions.push(t),c.workspace.textDocuments.forEach((e=>{"php"===e.languageId&&l(e)})),c.workspace.onDidChangeTextDocument((e=>{"php"===e.document.languageId&&l(e.document)}))},t.deactivate=function(){u&&(u.clear(),u.dispose())};const c=a(n(398)),s={php:/(\$\w+->\w+\([^)]*\)|\$\w+->\w+|\$\w+->\w+\([^)]*\))/g};let u;function l(e){if("php"!==e.languageId)return;const t=s[e.languageId],n=[];let r=!1,o=null;for(let i=0;i<e.lineCount;i++){const a=e.lineAt(i),s=a.text,u=s.match(/foreach\s*\((\$\w+)\s+as\s+(\$\w+)\)/);if(u&&(r=!0,o=u[2]),s.includes("}")&&r&&(r=!1,o=null),r&&o){let e;for(;null!==(e=t.exec(s));)if(e[0].includes(o)){const t=new c.Diagnostic(new c.Range(a.range.start,a.range.end),`Potential N+1 query detected: ${e[0]}. Consider using eager loading (e.g., with('posts')).`,c.DiagnosticSeverity.Warning);t.code="n1-query",n.push(t)}}}u.set(e.uri,n)}},398:e=>{e.exports=require("vscode")}},t={},n=function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(265);module.exports=n})();